<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Admin Panel - √úr√ºn Y√∂netimi (TR/DE + Resim)</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage.js"></script>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
    h1 { color: #333; }
    input, button { margin: 5px 0; padding: 8px; }
    #adminDiv { background: #fff; padding: 20px; border-radius: 6px; margin-top: 20px; }
    li { margin: 5px 0; }
    img { margin-top: 5px; border-radius: 4px; }
  </style>
</head>
<body>
  <h1>Admin Panel (T√ºrk√ße / Almanca + Resim)</h1>

  <!-- Giri≈ü -->
  <div id="loginDiv">
    <h2>Giri≈ü</h2>
    <input type="email" id="email" placeholder="E-posta"><br>
    <input type="password" id="password" placeholder="≈ûifre"><br>
    <button onclick="login()">Giri≈ü Yap</button>
  </div>

  <!-- Y√∂netim -->
  <div id="adminDiv" style="display:none;">
    <h2>√úr√ºn Ekle</h2>
    <input type="text" id="urunAdTR" placeholder="√úr√ºn adƒ± (T√ºrk√ße)"><br>
    <input type="text" id="urunAdDE" placeholder="√úr√ºn adƒ± (Almanca)"><br>
    <input type="text" id="urunFiyat" placeholder="√úr√ºn fiyatƒ±"><br>
    <input type="file" id="urunResim"><br>
    <button onclick="urunEkle()">Ekle</button>

    <h2>√úr√ºnler</h2>
    <ul id="urunListesi"></ul>
  </div>

<script>
  // üî• Firebase ayarlarƒ±nƒ± buraya koymayƒ± unutma
  const firebaseConfig = {
    apiKey: "AIzaSyCOGoE0f0gywYGrZCMcQfUE6ikf-4X7x1k",
    authDomain: "gis-nwr-website.firebaseapp.com",
    projectId: "gis-nwr-website",
    storageBucket: "gis-nwr-website.firebasestorage.app",
    messagingSenderId: "654148719639",
    appId: "1:654148719639:web:b7cd23a784ceff9cea3852",
    measurementId: "G-1KMLFGBXWP"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();
  const storage = firebase.storage();

  // Giri≈ü
  function login() {
    const email = document.getElementById("email").value;
    const pass = document.getElementById("password").value;
    auth.signInWithEmailAndPassword(email, pass)
      .then(() => {
        document.getElementById("loginDiv").style.display = "none";
        document.getElementById("adminDiv").style.display = "block";
        urunleriListele();
      })
      .catch(err => alert("Hata: " + err.message));
  }

  // √úr√ºn ekle
  function urunEkle() {
    const ad_tr = document.getElementById("urunAdTR").value;
    const ad_de = document.getElementById("urunAdDE").value;
    const fiyat = document.getElementById("urunFiyat").value;
    const file = document.getElementById("urunResim").files[0];

    if (!file) {
      alert("L√ºtfen bir resim se√ßin!");
      return;
    }

    const storageRef = storage.ref("urunler/" + file.name);
    storageRef.put(file).then(snapshot => {
      snapshot.ref.getDownloadURL().then(url => {
        db.collection("urunler").add({ ad_tr, ad_de, fiyat, resim: url })
          .then(() => { alert("√úr√ºn eklendi!"); urunleriListele(); });
      });
    });
  }

  // √úr√ºnleri listele
  function urunleriListele() {
    const ul = document.getElementById("urunListesi");
    ul.innerHTML = "";
    db.collection("urunler").get().then(snapshot => {
      snapshot.forEach(doc => {
        let data = doc.data();
        let li = document.createElement("li");
        li.innerHTML = data.ad_tr + " / " + data.ad_de + " - " + data.fiyat +
          (data.resim ? `<br><img src="${data.resim}" width="120">` : "");
        ul.appendChild(li);
      });
    });
  }
</script>
</body>
</html>
